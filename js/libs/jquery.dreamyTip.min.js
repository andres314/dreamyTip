/*
* @fileoverview DreamyTip v3.1 - jQuery tooltip widget
* @author andres(at)dreamsiteweb.com (Andres Pi)
* 
* 2012 - dreamsiteweb.com
* 
* @license Dual licensed under the MIT and GPL licenses:
* http://www.opensource.org/licenses/mit-license.php
* http://www.gnu.org/licenses/gpl.html 
* 
*
* The usage is similar to any Pluing jQuery.
* The only settings in the HTML is the title attribute
* in the tag that will have the tooltip, which will
* contain the text to display. 
* You should include this file, dreamytip.css, dreamytip.png and the 
* jquery.ba-outside-events.min.js plugin by Ben Alman for the events
* outside the tooltip(for more info 
* about this plugin check this site http://bit.ly/gCHiHT). 
*
* Options:
         
  addCursorPointer: true, // add style cursor pointer on the target
  offsetLeftAdd: 0, // add extra left offset
  offsetTopAdd: 0, // add extra top offset
  backgroundPosition: false, // String to set a different background position (ex. "30px", "5% 10px", "left top")
  fade:  0.9, // opacity of the tooltip
  duration: 'medium', // duration of the animation
  easing: 'swing', //effect
  event:'click', // click, focus, blur & hover are allowed
  closeButton: true, //True for the "x" button in the tooltip
  closeWithClick:false, //True to close when you click the tooltip
  closeOnBlur:false, //True to close when the trigger element lose focus
  autoCloseAfter: false, // milliseconds to wait to auto close
  position:'top', // top, right, left, bottom
  fontSize: false, // Set a different font-size than the default on CSS
  callbackOnShow: function(){}, // Callback for appear function. Could be the name of the function or if you need pass params an object like this: {f:writeSomething,params:'callbackOnShow: the tooltip appear'}}
        callbackOnHide: function(){} // Callback for disappear function. Could be the name of the function or if you need pass params an object like this: {f:writeSomething,params:'callbackOnShow: the tooltip appear'}}

*/
(function(d){var i=function(a,b,c){switch(b){case "left":a=Math.abs(c-a.dreamyTipElememt.outerWidth())-5;break;case "right":a=Math.abs(c+a.outerWidth())+5;break;default:a=Math.abs(c+a.outerWidth()/2-a.dreamyTipElememt.outerWidth()/2)}return a},g=function(a){var b=a.data("dreamyTip").opts,c=a.offset();a._isOpen=!0;a.dreamyTipElememt.children(".dreamyTipInner").text(a.data("dtMsg"));a.dreamyTipElememt.css({top:"bottom"==b.position?c.top+b.offsetTopAdd+a.height():"left"==b.position||"right"==b.position?
c.top+b.offsetTopAdd+a.outerHeight()/2-a.dreamyTipElememt.outerHeight()/2:c.top+b.offsetTopAdd-a.dreamyTipElememt.outerHeight(),left:i(a,b.position,c.left+b.offsetLeftAdd),zIndex:1E4,display:"block"}).stop().animate({opacity:b.fade},b.duration,b.easing,function(){a.dreamyTipElememt.bind("clickoutside",{that:a},e)});"object"==typeof b.callbackOnShow?b.callbackOnShow.f(b.callbackOnShow.params):b.callbackOnShow();b.autoCloseAfter&&setTimeout(function(){e(a)},b.autoCloseAfter)},e=function(a){a.data.that&&
(a=a.data.that);var b=a.data("dreamyTip").opts;a._isOpen=!1;a.dreamyTipElememt.animate({opacity:0},b.duration,b.easing,function(){d(this).css({zIndex:0,display:"none"});"object"==typeof b.callbackOnHide?b.callbackOnHide.f(b.callbackOnHide.params):b.callbackOnHide();a.dreamyTipElememt.unbind("clickoutside",e)})},h=function(a){var b=a.data("dreamyTip").id,c=a.data("dreamyTip").opts;c.closeButton?(d("body").append('<div class="dreamyTip dt-'+c.position+'" id="dreamyTip'+b+'"><div class="dreamyTipBtn">x</div><div class="dreamyTipInner"></div></div>'),
d("#dreamyTip"+b+" .dreamyTipBtn").bind("click",function(){e(a)})):d("body").append('<div class="dreamyTip dt-'+c.position+'" id="dreamyTip'+b+'"><div class="dreamyTipInner"></div></div>');a.dreamyTipElememt=d("#dreamyTip"+b);c.closeWithClick&&a.dreamyTipElememt.bind("click",function(){e(a)});c.fontSize&&a.dreamyTipElememt.css("font-size",c.fontSize);c.backgroundPosition&&a.dreamyTipElememt.css("background-position",c.backgroundPosition)},f={init:function(a){return this.each(function(){var b=d.extend({},
d.fn.dreamyTip.defaults,a),c=d(this);c.dreamyTipElememt=!1;b.addCursorPointer&&c.css("cursor","pointer");c.data("dtMsg",c.attr("title")).removeAttr("title");c.data("dreamyTip")||c.data("dreamyTip",{opts:b,id:(new Date).getTime()});c.bind(b.event+".dreamyTip",function(){c.dreamyTipElememt||h(c);c._isOpen?e(c):g(c)});b.closeOnBlur&&c.bind("blur.dreamyTip",function(){e(c)})})},destroy:function(){return this.each(function(){var a=d(this),b=a.data("dreamyTip");d(this).unbind(".dreamyTip");d("#dreamyTip"+
b.id).remove();a.removeData("dreamyTip")})},show:function(){return this.each(function(){var a=d(this);a.data("dreamyTip");"undefined"!=a.dreamyTipElememt&&h(a);g(a)})},close:function(){return this.each(function(){var a=d(this),b=a.data("dreamyTip");a.dreamyTipElememt=d("#dreamyTip"+b.id);e(a)})}};d.fn.dreamyTip=function(a){if(f[a])return f[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return f.init.apply(this,arguments);d.error("Method "+a+" does not exist on jQuery.dreamyTip")};
d.fn.dreamyTip.defaults={addCursorPointer:!0,offsetLeftAdd:0,offsetTopAdd:0,backgroundPosition:!1,fade:0.9,duration:"medium",easing:"swing",event:"click",closeButton:!0,closeWithClick:!1,closeOnBlur:!1,autoCloseAfter:!1,position:"top",fontSize:!1,callbackOnShow:function(){},callbackOnHide:function(){}}})(jQuery);